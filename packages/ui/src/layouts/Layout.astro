---
import '../styles/global.css';

const { content, containerClassName } = Astro.props;
const lang = content?.lang ?? 'en';
const title = content?.title ?? 'Cashew';
const links = [
	{label: 'Featured', path: '/featured'},
	{label: 'Analyze', path: '#'},
	{label: 'Calendar', path: '#'},
	{label: 'About', path: '#'},
].map((link) => {
	const isCurrent = title.includes(link.label);
	return { 
		...link, 
		path: isCurrent ? '#' : link.path, 
		isCurrent,
	};
});
---

<html lang={lang}>
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<title>{title}</title>
	</head>

	<body>
		<div>
			<nav class="navbar container mx-auto relative">
				<div class="navbar-start">
					<div class="dropdown">
					<label tabindex={0} class="btn btn-ghost lg:hidden">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16" /></svg>
					</label>
					<ul tabindex={0} class="menu menu-compact dropdown-content mt-3 p-2 shadow bg-slate-600 rounded-box w-52">
						{links.map(({label, path, isCurrent}) => (
							<li><a class={isCurrent ? 'link' : ''} href={path}>{label}</a></li>
						))}
					</ul>
					</div>
					<a href={title === 'Cashew' ? '#' : '/'} class="link link-hover bg-inherit border-none normal-case text-xl text-gray-500">Cashew</a>
				</div>
				<div class="absolute hidden lg:flex w-full pointer-events-none justify-center">
					<ul class="tabs pointer-events-auto">
							{links.map(({label, path, isCurrent}) => (
								<li><a class={`tab ${isCurrent ? 'tab-active' : ''}`} href={path}>{label}</a></li>
							))}
					</ul>
				</div>
				<div class="navbar-end flex-none gap-2">
					<button class="btn btn-ghost btn-circle">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
					</button>
					<a class="btn">Log In / Sign Up</a>
				</div>
			</nav>
		</div>

		<main class={`container mx-auto ${containerClassName}`}>
			<slot />
		</main>

		<footer class='p-4'>
			<p class='text-center'>Cashew Â© 2022</p>
		</footer>
	</body>
</html>
